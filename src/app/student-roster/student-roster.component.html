
Today's Date is {{ todaysDateDisplay }}<br><br>
<div class="margin-right">Critical Events (Due Today)</div><br>
<div *ngIf="studentsWithCriticalTasks.length <= 0">Nothing. Good job!</div>
<div *ngIf="studentsWithCriticalTasks.length > 0">
    <ul>
        <li *ngFor="let student of studentsWithCriticalTasks">{{student.name}}
            <ol>
                <li *ngFor="let task of student.criticalTasks">{{task}}</li>
            </ol>
        </li>
        
    </ul>
</div><br>
<div><button (click)="dayMinusOne()" class="button">Day -1</button><button (click)="dayPlusOne()" class="button">Day +1</button></div>

<div>
    <br>
    <table border = "3" *ngIf="studentList.length > 0" class="blue">
        <thead>
            <tr>
                <th>Student Name</th>
                <th>Task</th>
                <th>Task Manager</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let student of studentList">
                <td [ngSwitch]="student.displayEditStudent">
                    <div *ngSwitchCase="0">{{ student.name }}<br>
                        <input type="image" src="/assets/edit.png" (click)="student.editStudentToggle(1)" class="icons" title="Edit Student">
                        <input type="image" src="/assets/delete.png" (click)="deleteStudent(student)" class="icons" title="Delete Student" >
                        <input type="image" src="/assets/add.png" (click)="student.editStudentToggle(2)" class="icons" title="Add Task To Student"></div>
                    <div *ngSwitchCase="1">
                        <form [formGroup] ="edit_student_name" (ngSubmit)="sendEditedStudentName(student)">
                            <input type="text" id="edit_student_name" name="edit_student_name" placeholder="{{student.name}}" formControlName="studentValueEntered" class="type">
                            <br>
                            <input type="image" src="/assets/check.png" class="icons" title="Change Name">
                            <input type="image" src="/assets/cancel.png" (click)="goBackStudentName(student)" class="icons" title="Cancel Edit">
                        </form> 
                    </div>
                    <div *ngSwitchCase="2">{{ student.name }} 
                        <form [formGroup] ="add_task" (ngSubmit)="sendAddTask(student)">
                            <textarea rows="3" columns = "50" class="addTask type" id="add_task" name="add_task"  formControlName="taskValueEntered"></textarea>
                            <br>
                            <input type="image" src="/assets/check.png" class="icons" title="Add Task">
                            <input type="image" src="/assets/cancel.png" (click)="student.editStudentToggle(0)" class="icons" title="Cancel Edit">
                        </form>
                    </div>
                </td>
                    <td *ngIf="student.tasks.length > 0">
                    <ul id="space-between-tasks" *ngFor="let task of student.tasks" [ngSwitch]="task.displayEditTask">
                        <li *ngSwitchCase="0" >{{ task.taskName }}<br>
                            <input type="image" src="/assets/edit.png" (click)="task.editTaskToggle(1)" class="icons" title="Edit Task">
                            <input type="image" src="/assets/delete.png" (click)="student.deleteTask(task)" class="icons" title="Delete Task">
                            <input type="image" src="/assets/taskadd.png" (click)="task.editFrequencyToggle(1)" class="icons" title="Setup Task Manager">
                            
                        </li>
                        <li *ngSwitchCase="1">
                            <form [formGroup] ="edit_task_name" (ngSubmit)="sendEditedTask(student, task)">
                                <input type="text" id="edit_task" name="edit_task" placeholder="{{task.taskName}}" class="type" formControlName="valueEntered">
                                <br>
                                <input type="image" src="/assets/check.png" class="icons" title="Edit Task">
                                <input type="image" src="/assets/cancel.png" (click)="goBack(task)" class="icons" title="Cancel Edit">
                            </form> 
                                
                            </li>
                        </ul>
                    </td>
                    <td *ngIf="student.tasks.length <= 0">No Tasks to Display</td>

                    <td *ngIf="student.tasks.length > 0">
                        <ul class="nodot" id="space-between-tasks" *ngFor="let task of student.tasks" [ngSwitch]="task.displayFrequencyTask">
                            <li *ngSwitchCase="0">Configure Task With <img src="/assets/taskadd.png" class="icons"></li>
                            <li *ngSwitchCase="1"> 
                                    <strong>Frequency of Task </strong><br> 
                                    <select #times name="times" id="times" class="selector" (change)="task.onSelectFrequency(times.value)">
                                        <option value="None">Select An Option</option> 
                                        <option value="No Change">No Change</option>
                                        <option value="Once">Only Once</option> 
                                        <option value="Daily">Once A Day (Weekdays Only)</option> 
                                        <option value="Alternate">Every Other Day (Weekdays Only)</option> 
                                        <option value="Weekly">Once A Week</option> 
                                        <option value="Biweekly">Every other week</option> 
                                        <option value="Monthly">Once A Month</option>
                                        <option value="Custom">Custom Schedule</option>
                                    </select>                                                               
                            </li>
                            
                            <li *ngSwitchCase="2">
                                <strong>Select Date</strong>
                                <form [formGroup] ="select_date" (ngSubmit)="logDate(task, false)">
                                    <input type="date" id="task_date" name="task_date" class="selector" formControlName="dateSelected">
                                    <input type="image" src="/assets/check.png" class="login submit icons" value="Submit" title="Submit Date">
                                    <input type="image" src="/assets/cancel.png" (click)="task.editFrequencyToggle(1)" class="icons" title="Cancel">
                                    
                                </form> 
                            </li>
                            <li *ngSwitchCase="3">||{{task.frequency}}|| <strong>Next Event: </strong>{{ task.nextEventDisplay }}</li>
                            <li *ngSwitchCase="4">Due Date - {{task.nextEventDisplay}}</li>
                            <li *ngSwitchCase="5">
                                Weekly Schedule - Check Days 
                                <input type="image" src="/assets/check.png" (click)="logDate(task, true)" class="submit icons">
                                <input type="image" src="/assets/cancel.png" (click)="task.editFrequencyToggle(1)" class="icons" title="Cancel"><br>
                                
                                <input type="checkbox" id="monday" name="amon" (change)="task.validateDaysChecked($event)"> Monday 
                                <input type="checkbox" id="tuesday" name="btue" (change)="task.validateDaysChecked($event)"> Tuesday
                                <input type="checkbox" id="wednesday" name="cwed" (change)="task.validateDaysChecked($event)"> Wednesday
                                <input type="checkbox" id="thursday" name="dthu" (change)="task.validateDaysChecked($event)"> Thursday
                                <input type="checkbox" id="friday" name="efri" (change)="task.validateDaysChecked($event)"> Friday

                            </li>
                        </ul>
                    </td>
                    <td *ngIf="student.tasks.length <= 0">Nothing to Display</td>
                
            </tr>
        </tbody>
    </table>
</div>

